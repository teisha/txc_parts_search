"use strict";const Part=require("../models/part");function fetchAll(t,e,r,s){Part.fetchAll(e,t).then(([r,a])=>{s.render("part/part-list",{parts:r,offset:t,limit:e,searchValue:"",pageTitle:"All Parts",path:"/parts"})}).catch(t=>console.log(t))}exports.getIndex=((t,e,r)=>{console.log("Connected to website"),e.redirect("/list-parts")}),exports.getParts=((t,e,r)=>{fetchAll(0,20,t,e)}),exports.getPreviousParts=((t,e,r)=>{const s=parseInt(t.query.limit),a=parseInt(t.query.offset)-s;a<0&&(a=0),console.log("Getting "+t.query.offset+" to "+a),fetchAll(a,s,t,e)}),exports.getNextParts=((t,e,r)=>{const s=parseInt(t.query.limit),a=parseInt(t.query.offset)+s;console.log("Getting "+t.query.offset+" to "+a),fetchAll(a,s,t,e)}),exports.getPart=((t,e,r)=>{const s=t.params.partId;Part.findById(s).then(([t])=>{e.render("part/part-detail",{part:t[0],pageTitle:t.vendor_sku,path:"/parts"})}).catch(t=>console.log(t))}),exports.searchParts=((t,e,r)=>{const s=t.body.searchType,a=t.body.searchParameter;if(!a||""===a)return e.redirect("/list-parts");console.log("Running query for search parameter: "+a),Part.findMatching(50,0,a,s).then(([t,r])=>{e.render("part/part-list",{parts:t,offset:0,limit:50,searchValue:a,pageTitle:'Parts Matching: "'+a+'"',path:"/parts"})}).catch(t=>console.log(t))});